!function(a){a.fn.stopwatch=function(b){b=jQuery.extend({theme:null,persistKey:null,start:null,stop:null,reset:null},b);var c=a(this);c.addClass("stopwatch").addClass(b.theme),c.each(function(){function d(){var a=parseFloat(h.text()),b=parseFloat(i.text()),c=parseFloat(j.text());c++,c>59&&(c=0,b+=1),b>59&&(b=0,a+=1),h.html("0".substring(a>=10)+a),i.html("0".substring(b>=10)+b),j.html("0".substring(c>=10)+c)}var e=a(this),f=0,g=a("<div>").addClass("the-time"),h=a("<span>").addClass("hr").text("00"),i=a("<span>").addClass("min").text("00"),j=a("<span>").addClass("sec").text("00");if("string"==typeof b.persistKey){var k=localStorage["_jq.stopwatch."+b.persistKey]?JSON.parse(localStorage["_jq.stopwatch."+b.persistKey]):null;null!==k&&(h.text(k.hr),i.text(k.min),j.text(k.sec))}var l=a("<a>").attr("href","").addClass("start-stop").text("Start"),m=a("<a>").attr("href","").addClass("reset").text("Reset");g=g.append(h).append(i).append(j),e.html("").append(g).append(l).append(m),l.bind("click",function(e){e.preventDefault();var g=a(this);"Start"===g.text()?(b.start&&b.start(c),f=setInterval(d,1e3),g.text("Stop")):(b.stop&&b.stop(c),clearInterval(f),g.text("Start"))}),m.bind("click",function(a){a.preventDefault(),b.reset&&b.reset(c),clearInterval(f),l.text("Start"),f=0,h.text("00"),i.text("00"),j.text("00")});var n=function(){return{hr:h.text(),min:i.text(),sec:j.text()}},o=function(){localStorage["_jq.stopwatch."+b.persistKey]=JSON.stringify(n())};"string"==typeof b.persistKey&&window.addEventListener("beforeunload",function(){o()})})}}(jQuery);